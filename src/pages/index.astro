---
import {
  Alert,
  AlertTitle,
  AlertDescription,
} from "../components/ui/alert.tsx";
import { TriangleAlert } from "lucide-react";
import Workspace from "../components/workspace/Workspace.tsx";
import CentrifyLayout from "@/layout/CentrifyLayout.astro";
import Footer from "@/components/footer/Footer.astro";
import Header from "@/components/header/Header.astro";
import { links } from "@/links.ts";

const { cf } = Astro.locals.runtime;
const isRestricted = cf?.country && ["RU", "TR", "IR", "CN", "AE"].includes(cf?.country);
---

<CentrifyLayout title="PetPet" description="PetPet GIF Generator by Discord avatar">
  <Header links={links} slim={true} />
  {
    isRestricted && (
      <Alert className="bg-transparent">
        <TriangleAlert />
        <AlertTitle>Heads up!</AlertTitle>
        <AlertDescription>
          Due to regulatory actions in your country, the service may experience interruptions.
        </AlertDescription>
      </Alert>
    )
  }
  <Workspace site={Astro.site!.host} client:load />
  <Footer />
</CentrifyLayout>
